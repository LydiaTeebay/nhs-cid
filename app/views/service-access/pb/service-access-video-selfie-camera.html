{% extends '_layouts/_grids/_grid-2-1-hotjar.html' %}
{% block page_title %}Access {{ serviceName }} - Instructions to record a short video{% endblock %}

{% set signedin = 'true' %}
{% set params = "?service=" + service + "&serviceName=" + serviceName + "&emailAddress=" + emailAddress + "&mobileNum=" + mobileNum + "&idType=" + idType + "&formerror=" + formerror + "&hidehead=" + hidehead + "&devMode=" + devMode + "&challenge=" + challenge + "&returnUrl=" + returnUrl %}

{% block content %}


<div class="first-item">

  <section class="loading-container" id="scan-id-0" style="display:block">

    <h1 id="spinner-heading" style="padding-bottom: 0; display:none;">Uploading your video</h1>

    <div class="bar_container">
      <div id="main_container">
        <div id="pbar" class="progress-spinner" data-percent="0">
          <img src="/images/loader-spinner.svg" width="200px" height="200px" id="spinner" />
          <div class="ppc-loading">
            <div class="pcc-percents-wrapper">
              <span id="spinner-status">Loading</span><span aria-hidden="true">...</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>


  <section class="" id="scan-id-1" style="display:none">

    {% if mobileOsV === 9.1 %}

    {% import "_partials/_components/_callout.html" as callout %}
    {{ callout.pattern('','It looks like you are using a buggy version of iOS. Please update to the latest version and come back.','alert') }}

    {% endif %}

    <div class="callout callout--error camera-file-format" style="display:block">
      <h2 class="h3">There's a problem</h2>
      <!--<p>You've taken a photo by mistake. When you click on <em style="font-style: normal">Open camera</em>, pick your video camcorder.</p>-->

      <p>Your video is a file type we cannot accept. When you click on <em style="font-style: normal">Open camera</em>, pick your video camcorder.</p>

      <!--<p>Your video is too long. Record your video again and stop it when youâ€™ve finished speaking.</p>-->

      <!--<p>Your video is too small. Record your video again.</p>-->
      <!--<p>When you click on <em style="font-style: normal">Open camera</em>, pick your main video camcorder.</p></p>-->
    </div>

    <p><a href="service-access-video-selfie-instructions-2{{ params }}" class="link-back">Back</a></p>

    <form>
      <fieldset class="">
        <legend for="radio-inline-group">
          <h1 style="padding-bottom: 0;">
            Record a short video
          </h1>
        </legend>

        <p>You'll need to record a short video of your face.</p>
        <p>When you record your video, say these 4 numbers:</p>

        <p class="camera-challenge" style="font-size: 42px;padding-bottom: .5em;">{{ pinCode }}</p>


        <div class="form-group">

          <label for="video-selfie" class="camera-button">Open camera
            <input type="file" id="video-selfie" name="video" accept="video/mp4,video/x-m4v,video/*" capture="user">
          </label>

        </div>

      </fieldset>

    </form>

  </section>

  <section class="uploader-container" id="scan-id-3" style="display:none">

    <h1 style="padding-bottom: 0;">
      Uploading your video
    </h1>

    <div class="bar_container">
      <div id="main_container">
        <div id="pbar" class="progress-pie-chart" data-percent="0">
          <div class="ppc-progress">
            <div class="ppc-progress-fill"></div>
          </div>
          <div class="ppc-percents">
            <div class="pcc-percents-wrapper">
              <span>%</span>
            </div>
          </div>
        </div>

        <progress style="display: none" id="progress_bar" value="0" max="100"></progress>
      </div>
    </div>

  </section>

  <section class="" id="scan-id-9" style="display:none">

    <h1 style="padding-bottom: 0;">Check your video</h1>

    <p>Can you see all of your face and hear the numbers <strong>{{ pinCode }}</strong> clearly?</p>

    <div class="reading-width">
      <div id="scan-video-preview">
        <video id="uploaded-video" controls autoplay style="max-width:100%;max-height:400px;">
          <source src="#" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
    </div>


    <div class="form-group">

      {% if formerror === 'invalid' %}
      <a class="button" href="" id="submit-videoSelfie2-button-error">Yes - continue</a>
      {% else %}
      <a class="button" href="" id="submit-videoSelfie2-button">Yes - continue</a>
      {% endif %}

      <p><a href="service-access-video-selfie-camera{{ params }}" id="">No - record video again</a></p>
    </div>

  </section>

  <section  class="" id="scan-id-7" style="display:none">

    <h1 style="padding-bottom: 0;">There's a problem with your video</h1>

    <p>This could be because of any of the following:</p>
    <ul>
      <li>you sent us a photo instead of a photo</li>
      <li>the video is too long (it only needs to be a few seconds)</li>
      <li>the file is a type we cannot accept</li>
    </ul>

    <div class="form-group">
      <a class="button" href="service-access-video-selfie-camera{{ params }}" id="">Record another video</a>
    </div>

      <p class="small" style="margin-top: 28px;">Reference: CID4013</p>

  </section>

<section  class="" id="scan-id-8" style="display:none">

  <h1 style="padding-bottom: 0;">Something went wrong</h1>

  <p>We're having technical problems.</p>

  <div class="form-group">
    <a class="button" href="service-access-video-selfie-camera{{ params }}" id="">Try again</a>
  </div>

  <div class="callout callout--info" style="margin-top: 28px;">
    <p>If you keep getting this message, please try again later.</p>
  </div>

  <p class="small" style="margin-top: 28px;">Reference: CID4012</p>

</section>

  {# section to show uploading error #}
  <section class="preview-container" id="scan-id-5" style="display:none">

    <h1 style="padding-bottom: 0;">Something went wrong</h1>

    <div id="nhs-number" class="has-error form-row-error-active">
      <p>We could not upload your video.</p>
    </div>

    <div class="form-group">
      <a class="button" href="" id="submit-photoId-back-button">Try again</a>
    </div>

    <p class="small" style="margin-top: 28px;">Reference: CID4011</p>

  </section>

  {% if formerror === 'invalid' %}
  <button id="confirmButton" style="visibility:hidden">Continue</button>
  {% else %}
  <button id="continueButton" style="visibility:hidden" onclick="window.location='service-access-confirmation{{ params }}';" >Continue</button>
  {% endif %}

</div>

<script type="text/javascript">

    //show then hide the spinner animation
    setTimeout(function(){
        document.getElementById('scan-id-0').style.display = 'none'
    }, 1500)
    setTimeout(function(){
        document.getElementById('scan-id-1').style.display = 'block'
    }, 1500)
</script>

{% endblock %}