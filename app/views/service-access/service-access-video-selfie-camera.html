{% extends '_layouts/_grids/_grid-2-1-stacked.html' %}
{% block page_title %}Access {{ serviceName }} - Take a video selfie{% endblock %}

{% set signedin = 'true' %}
{% set params = "?service=" + service + "&serviceName=" + serviceName + "&emailAddress=" + emailAddress + "&mobileNum=" + mobileNum + "&idType=" + idType + "&formerror=" + formerror %}

{% block content %}


<div class="first-item">

  <section class="" id="scan-id-1">

    <p><a class="" href="service-access-video-selfie{{ params }}">Go back</a></p>

    <form>
      <fieldset class="">
        <legend for="radio-inline-group">
          <h1 style="padding-bottom: 0;">
            Take a video selfie
          </h1>
        </legend>

        <p>You need to make sure:</p>
        <ul class="list list-bullet">
          {% if mobile %}
          <li>you use the front-facing camera</li>
          {% endif %}
          <li>your whole face is visible</li>
          <li>you follow the instructions on screen</li>
          <li>the video is at least 3 seconds long</li>
        </ul>
        <div class="form-group">

          <label for="video-selfie" class="camera-button">Open camera
            <input type="file" id="video-selfie" name="video" accept="video/mp4,video/x-m4v,video/*" capture="user">
          </label>

        </div>

      </fieldset>

    </form>

  </section>

  <section class="" id="scan-id-3" style="display:none">

    <h1 style="padding-bottom: 0;">
      Uploading your video
    </h1>

    <div class="bar_container">
      <div id="main_container">
        <div id="pbar" class="progress-pie-chart" data-percent="0">
          <div class="ppc-progress">
            <div class="ppc-progress-fill"></div>
          </div>
          <div class="ppc-percents">
            <div class="pcc-percents-wrapper">
              <span>%</span>
            </div>
          </div>
        </div>

        <progress style="display: none" id="progress_bar" value="0" max="100"></progress>
      </div>
    </div>

  </section>


  {% if formerror !== 'invalid' %}
  <section class="" id="scan-id-5" style="display:none">

    <h1 style="padding-bottom: 0;">Review your video selfie</h1>

    <div class="reading-width">
      <div id="scan-video-preview">
        <video id="uploaded-video" controls autoplay loop muted style="width:100%;height:auto;">
          <source src="#" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
    </div>

    <div class="form-group">
      <a class="button" href="service-access-confirmation{{ params }}" id="">Use this video</a>
      <p><a href="service-access-video-selfie-camera{{ params }}" id="">Cancel</a></p>
    </div>

  </section>
  {% endif %}

  {% if formerror !== 'undefined' %}
  <section  class="" id="scan-id-6" style="display:none">

    <h1 style="padding-bottom: 0;">Upload error</h1>

    {% if formerror !== 'undefined' %}
    <div id="nhs-number" class="has-error form-row-error-active">
      <span class="error error-message error-label error-text error-message-active" id="nhs-number-error">There was an problem uploading your video.</span>
    </div>
    {% endif %}

    <div class="form-group">
      <a class="button" href="" id="video-selfie-back-button">Retry upload</a>
      <p><a href="service-access-video-selfie-camera{{ params }}" id="">Cancel</a></p>

    </div>

  </section>
  {% endif %}


</div>

{% endblock %}